<HTML>
<BODY>
    <canvas id='lab2' width='500' height='500' style="border:1px solid"></canvas>
    <script>
        var canvas = document.getElementById('lab2');
        var ctx = canvas.getContext('2d');
        var flag=0;``
        var x=0;
        var y=0;

        document.addEventListener("click", function (event) {
            if (event.which == 1) {
                if (flag == 0) {
                    x = event.offsetX;
                    y = event.offsetY;
                    flag = 1;
                } else if (flag == 1) {
                    var dx = 0;
                    var dy = 0;
                    var e = 0;
                    var e1 = 0;
                    var k = 0;
                    var dxor = 1;
                    var dyor = 1;
                    dx = event.offsetX - x;
                    dy = event.offsetY - y;
                    if (dy < 0) {
                        dyor = -1;
                    }
                    if (dx < 0) {
                        dxor = -1;
                    }


                    if (dy*dyor<dx*dxor){

                        k = 2 * dy * dyor;
                        e1 = 2 * dx * dxor;
                        var y_ = 0;
                        for (var i = 0; i * dxor < dx * dxor; i += dxor) {
                            if (e >= dx) {
                                y_ += dyor;
                                e -= e1;
                            }
                            ctx.fillRect(x + i, y + y_, 1, 1);
                            e += k;
                        }

                    }
                    if (dy * dyor > dx * dxor) {

                        k = 2 * dx * dxor;
                        e1 = 2 * dy * dyor;
                        var y_ = 0;
                        for (var i = 0; i * dyor < dy * dyor; i += dyor) {
                            if (e >= dy) {
                                y_ += dxor;
                                e -= e1;
                            }
                            ctx.fillRect(x + y_, y + i, 1, 1);
                            e += k;
                        }

                    }


                    flag = 0;

                }
            }
        });
    </script>
</BODY>
</HTML>
